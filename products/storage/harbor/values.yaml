database:
  clusterName: harbor-postgres
  replicas: 2
  storageClass: ceph-block-nvme-1
  size: 5Gi

harbor:
  expose:
    type: route
    tls:
      enabled: false
    route:
      parentRefs:
        - name: envoy-gateway-public
          namespace: envoy-gateway
          sectionName: web-https
      hosts:
        - harbor.feddema.dev

  externalURL: https://harbor.feddema.dev

  persistence:
    enabled: true
    persistentVolumeClaim:
      registry:
        size: 5Gi
      jobservice:
        jobLog:
          size: 1Gi
      database:
        size: 1Gi
      redis:
        size: 1Gi
      trivy:
        size: 5Gi
    imageChartStorage:
      type: s3
      s3:
        existingSecret: "harbor-s3-credentials"
        region: ''
        bucket: harbor
        regionendpoint: http://rook-ceph-rgw-ceph-object-nvme-2.rook-ceph.svc:80
        secure: false

  existingSecretAdminPassword: "harbor-credentials"
  existingSecretSecretKey: "harbor-credentials"

  ipFamily:
    ipv6:
      enabled: false

  logLevel: info

  metrics:
    enabled: true
    serviceMonitor:
      enabled: true

  nginx:
    image:
      repository: docker.io/goharbor/nginx-photon
#      tag: dev
    replicas: 1
    revisionHistoryLimit: 0

  portal:
    image:
      repository: docker.io/goharbor/harbor-portal
#      tag: dev
    replicas: 1
    revisionHistoryLimit: 0

  core:
    image:
      repository: docker.io/goharbor/harbor-core
#      tag: dev
    replicas: 1
    revisionHistoryLimit: 0
    existingSecret: "harbor-credentials"
    existingXsrfSecret: "harbor-credentials"

  jobservice:
    image:
      repository: docker.io/goharbor/harbor-jobservice
#      tag: dev
    replicas: 1
    revisionHistoryLimit: 0
    maxJobWorkers: 10
    jobLoggers:
      - stdout
    existingSecret: "harbor-credentials"

  registry:
    registry:
      image:
        repository: docker.io/goharbor/registry-photon
#        tag: dev
    controller:
      image:
        repository: docker.io/goharbor/harbor-registryctl
#        tag: dev
    replicas: 1
    revisionHistoryLimit: 0
    existingSecret: "harbor-credentials"
    credentials:
      existingSecret: "harbor-credentials"

  trivy:
    enabled: true
    image:
      repository: docker.io/goharbor/trivy-adapter-photon
#      tag: dev
    replicas: 1
    vulnType: "os,library"
    severity: "UNKNOWN,LOW,MEDIUM,HIGH,CRITICAL"
    insecure: true

  database:
    type: external
    external:
      host: harbor-postgres-rw
      port: 5432
      username: app
      coreDatabase: app
      existingSecret: harbor-credentials

  redis:
    type: internal
    internal:
      image:
        repository: docker.io/goharbor/redis-photon
#        tag: dev

  exporter:
    image:
      repository: docker.io/goharbor/harbor-exporter
#      tag: dev
    replicas: 1
    revisionHistoryLimit: 0
