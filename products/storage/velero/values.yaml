velero:
  revisionHistoryLimit: 0
  resources: { }

  initContainers:
   - name: velero-plugin-for-microsoft-azure
     image: velero/velero-plugin-for-microsoft-azure:v1.12.1
     imagePullPolicy: IfNotPresent
     volumeMounts:
       - mountPath: /target
         name: plugins

  metrics:
    serviceMonitor:
      enabled: true
    nodeAgentPodMonitor:
      enabled: true

  configuration:
    backupStorageLocation:
      - name: default
        provider: azure
        bucket: velero
        default: true
        credential:
          name: velero-credentials
          key: credentials
        config:
          useAAD: "true"
          resourceGroup: "velero"
          storageAccount: "a88d2ea1-5ce5-4bb9-9726-c545f46fbb22"
          subscriptionId: "d6b524dd-32ef-4b34-a63c-12a0d389e4bf"

    volumeSnapshotLocation:
    - name: default
      provider: azure
      credential:
        name: velero-credentials
        key: credentials
      config:
        resourceGroup: "velero"
        subscriptionId: "d6b524dd-32ef-4b34-a63c-12a0d389e4bf"

    features: EnableCSI
    logFormat: json
    logLevel: info

  deployNodeAgent: true

  schedules:
    backup:
      schedule: "23 3 * * *"
      template:
        ttl: "240h"
        csiSnapshotTimeout: 30m0s
        storageLocation: default
        snapshotMoveData: true
        includedNamespaces:
        - adguard
        - home-assistant
        - immich
        - media-server
        - nextcloud
        - zigbee2mqtt
