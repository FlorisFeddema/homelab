minio:
  existingSecret: "minio-credentials"

  replicas: 3

  persistence:
    size: 50Gi

  ingress:
    enabled: false
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-dns
      nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
      nginx.ingress.kubernetes.io/proxy-body-size: "0"
      nginx.ingress.kubernetes.io/proxy-read-timeout: "600"
      nginx.ingress.kubernetes.io/proxy-send-timeout: "600"
    hosts:
      - s3.minio.feddema.dev
    tls:
      - secretName: s3-minio-tls
        hosts:
          - s3.minio.feddema.dev

  consoleIngress:
    enabled: true
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-dns
      nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
    hosts:
      - minio.feddema.dev
    tls:
      - secretName: minio-tls
        hosts:
          - minio.feddema.dev

  resources:
    requests:
      memory: 512Mi
      cpu: 50m

  users:
    - accessKey: apps
      existingSecret: apps-user-credentials
      existingSecretKey: secretKey
      policy: readwrite

  svcaccts:
    - accessKey: loki
      existingSecret: loki-svc-credentials
      existingSecretKey: secretKey
      user: apps
    - accessKey: cnpg
      existingSecret: cnpg-svc-credentials
      existingSecretKey: secretKey
      user: apps

  buckets:
    - name: loki-chunks
      policy: none
      purge: false
      versioning: false
    - name: cnpg
      policy: none
      purge: false
      versioning: false

  customCommands:
    - command: ilm rule add --noncurrent-expire-days 7 myminio/loki-chunks

  metrics:
    serviceMonitor:
      enabled: true
      includeNode: true
