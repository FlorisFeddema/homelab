apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ template "powerdns.name" . }}-admin-config
  labels:
    app.kubernetes.io/name: {{ template "powerdns.name" . }}
    app.kubernetes.io/instance: {{ .Release.Name }}
    app.kubernetes.io/component: "powerdnsadmin"
    {{- include "labels" . | nindent 4 }}
data:
  SAML_ENABLED: "True"
  SAML_PATH: "os.path.join(os.path.dirname(file), 'saml')"
  SAML_METADATA_URL: "https://authentik.feddema.dev/application/saml/pdnsadmin/metadata/"
  SAML_METADATA_CACHE_LIFETIME: "1"
  SAML_LOGOUT_URL: "https://authentik.feddema.dev/application/saml/pdnsadmin/slo/binding/redirect/"
  SAML_SP_ENTITY_ID: "pdns-admin"
  SAML_SP_CONTACT_NAME: "me"
  SAML_SP_CONTACT_MAIL: "me"
  SAML_NAMEID_FORMAT: "urn:oasis:names:tc:SAML:2.0:nameid-format:persistent"
  SAML_ATTRIBUTE_USERNAME: "http://schemas.goauthentik.io/2021/02/saml/username"
  SAML_ATTRIBUTE_NAME: "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"
  SAML_ATTRIBUTE_EMAIL: "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"
  SAML_ATTRIBUTE_GROUP: "http://schemas.xmlsoap.org/claims/Group"
  SAML_GROUP_ADMIN_NAME: "Admins"
  SAML_SIGN_REQUEST: "True"
  SAML_ASSERTION_ENCRYPTED: "False"
  SAML_WANT_MESSAGE_SIGNED: "False"
  SAML_CERT: "/certs/saml.crt"
  SAML_DEBUG: "False"
