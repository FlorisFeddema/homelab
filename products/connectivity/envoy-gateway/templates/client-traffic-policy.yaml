apiVersion: gateway.envoyproxy.io/v1alpha1
kind: ClientTrafficPolicy
metadata:
  name: envoy-gateway-public
spec:
  targetRefs:
    - group: gateway.networking.k8s.io
      kind: Gateway
      name: envoy-gateway-public
  tls:
    minVersion: '1.2'
    maxVersion: '1.3'
    ciphers:
      - ECDHE-ECDSA-AES128-GCM-SHA256
      - ECDHE-RSA-AES128-GCM-SHA256
      - ECDHE-ECDSA-AES256-GCM-SHA384
      - ECDHE-RSA-AES256-GCM-SHA384
  connection:
    connectionLimit:
      value: 5000
  headers:
    enableEnvoyHeaders: false
    lateResponseHeaders:
      set:
        - name: "strict-transport-security"
          value: "max-age=31536000; includeSubDomains; preload"
        - name: "content-security-policy"
          value: "default-src 'self'; object-src 'none'; base-uri 'self'; frame-ancestors 'none'"
        - name: "permissions-policy"
          value: "geolocation=(), microphone=(), camera=(), payment=(), usb=()"
        - name: "referrer-policy"
          value: "no-referrer"
        - name: "x-content-type-options"
          value: "nosniff"
