cilium:
  k8sServiceHost: targon.feddema.dev
  k8sServicePort: 6443

  kubeProxyReplacement: strict

  resources:
    limits:
      memory: 1500Mi
    requests:
      memory: 512Mi
      cpu: 100m

  bgpControlPlane:
    enabled: true

  certgen:
    ttlSecondsAfterFinished: null

  rollOutCiliumPods: true

  hubble:
    enabled: true

    tls:
      auto:
        method: cronJob

    metrics:
      enableOpenMetrics: true
      serviceMonitor:
        enabled: true
      dashboards:
        enabled: true
        namespace: grafana
        label: grafana_dashboard

    relay:
      enabled: true
      rollOutPods: true
      resources: { }
      prometheus:
        enabled: true
        serviceMonitor:
          enabled: true

    ui:
      enabled: true
      rollOutPods: true
      backend:
        resources: { }
      frontend:
        resources: { }

      ingress:
        enabled: true
        annotations:
          nginx.ingress.kubernetes.io/auth-url: |-
            http://ak-outpost-authentik-embedded-outpost.authentik.svc.cluster.local:9000/outpost.goauthentik.io/auth/nginx
          nginx.ingress.kubernetes.io/auth-signin: |-
            https://proxy.authentik.cloud.feddema.dev/outpost.goauthentik.io/start?rd=$escaped_request_uri
          nginx.ingress.kubernetes.io/auth-response-headers: |-
            Set-Cookie,X-authentik-username,X-authentik-groups,X-authentik-email,X-authentik-name,X-authentik-uid
          nginx.ingress.kubernetes.io/auth-snippet: |
            proxy_set_header X-Forwarded-Host $http_host;
          cert-manager.io/cluster-issuer: letsencrypt-dns
        hosts:
          - hubble.cloud.feddema.dev
        tls:
          - secretName: hubble-tls
            hosts:
              - hubble.cloud.feddema.dev

  monitor:
    enabled: true

  prometheus:
    enabled: true
    serviceMonitor:
      enabled: true
  dashboards:
    enabled: true
    namespace: grafana
    label: grafana_dashboard

  operator:
    replicas: 1
    resources: { }
    prometheus:
      enabled: true
      serviceMonitor:
        enabled: true
    dashboards:
      enabled: true
      namespace: grafana
      label: grafana_dashboard
