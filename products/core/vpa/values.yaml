vertical-pod-autoscaler:
  podSecurityContext:
    runAsNonRoot: true
    runAsUser: 65534
    seccompProfile:
      type: RuntimeDefault

  containerSecurityContext:
    allowPrivilegeEscalation: false
    privileged: false
    readOnlyRootFilesystem: true
    capabilities:
      drop:
      - ALL

  admissionController:
    resources:
      limits:
        cpu: null
        memory: 100Mi
      requests:
        cpu: 20m
        memory: 50Mi

    tls:
      existingSecret: vpa-tls-certs

  recommender:
    extraArgs:
    - "--pod-recommendation-min-cpu-millicores=5"
    - "--pod-recommendation-min-memory-mb=10"
    - "--prometheus-address=http://http://prometheus-thanos-query.prometheus:9090"
    - "--storage=prometheus"
    - "--history-length=7d"
    - "--history-resolution=15m"
    - "--round-cpu-millicores=5"
    - "--round-memory-bytes=10485760" # 10MiB

    resources:
      limits:
        memory: 140Mi
      requests:
        cpu: 20m
        memory: 70Mi

  updater:
    resources:
      limits:
        memory: 100Mi
      requests:
        cpu: 20m
        memory: 50Mi


