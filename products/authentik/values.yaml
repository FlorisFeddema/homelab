database:
  replicas: 1
  size: 5Gi

authentik:
  global:
    envValueFrom:
      AUTHENTIK_SECRET_KEY:
        secretKeyRef:
          key: secretKey
          name: authentik-secret
      AUTHENTIK_POSTGRESQL__PASSWORD:
        secretKeyRef:
          key: databasePassword
          name: authentik-secret

  worker:
    replicas: 1

  server:
    replicas: 1

    metrics:
      serviceMonitor:
        enabled: true

    ingress:
      enabled: true
      annotations:
        cert-manager.io/cluster-issuer: letsencrypt-dns
      hosts:
        - authentik.feddema.dev
      tls:
        - secretName: authentik-tls
          hosts:
            - authentik.feddema.dev

  authentik:
    log_level: info

    postgresql:
      host: "authentik-postgres-rw"
      name: "app"
      user: "app"
      port: 5432
    redis:
      host: "{{ .Release.Name }}-redis-master"


  prometheus:
    rules:
      enabled: true

  redis:
    enabled: true
    architecture: standalone
    auth:
      enabled: false
