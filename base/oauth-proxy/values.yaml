config:
  existingSecret: oauth-proxy-credentials
  configFile: |-
    email_domains = [ "*" ]
    upstreams = [ "file:///dev/null" ]
    provider = "keycloak-oidc"
    oidc_issuer_url = "https://auth.cloud.feddema.dev/realms/master"

serviceAccount:
  enabled: true

ingress:
  enabled: true
  path: /oauth2
  hosts:
    - longhorn.cloud.feddema.dev
    - falco.cloud.feddema.dev
    - hubble.cloud.feddema.dev
    - policy.cloud.feddema.dev
    - prometheus.cloud.feddema.dev
    - vmalert.cloud.feddema.dev
    - vmstorage.cloud.feddema.dev
    - vmselect.cloud.feddema.dev
    - vminsert.cloud.feddema.dev
  tls:
    - secretName: longhorn-tls
      hosts:
        - longhorn.cloud.feddema.dev
    - secretName: falco-tls
      hosts:
        - falco.cloud.feddema.dev
    - secretName: policy-tls
      hosts:
        - policys.cloud.feddema.dev
    - secretName: hubble-tls
      hosts:
        - hubble.cloud.feddema.dev
    - secretName: prometheus-tls
      hosts:
        - prometheus.cloud.feddema.dev
    - secretName: vmalert-tls
      hosts:
        - vmalert.cloud.feddema.dev
    - secretName: vmstorage-tls
      hosts:
        - vmstorage.cloud.feddema.dev
    - secretName: vmselect-tls
      hosts:
        - vmselect.cloud.feddema.dev
    - secretName: vminsert-tls
      hosts:
        - vminsert.cloud.feddema.dev

resources:
  limits:
    memory: 100Mi
  requests:
    cpu: 30m
    memory: 50Mi

proxyVarsAsSecrets: true

securityContext:
  enabled: false
  runAsNonRoot: true
  allowPrivilegeEscalation: false
  runAsUser: 2000

replicaCount: 1

podDisruptionBudget:
  enabled: false

httpScheme: http

sessionStorage:
  type: redis
  redis:
    clientType: "standalone"
    password: secret

redis:
  enabled: true
  architecture: standalone
  auth:
    enabled: true
    password: secret

checkDeprecation: true

metrics:
  enabled: true
  servicemonitor:
    enabled: true
